/**
 * @license Hyphenopoly_Loader 5.3.0 - client side hyphenation
 * ©2023  Mathias Nater, Güttingen (mathiasnater at gmail dot com)
 * https://github.com/mnater/Hyphenopoly
 *
 * Released under the MIT license
 * http://mnater.github.io/Hyphenopoly/LICENSE
 */
/* globals Hyphenopoly:readonly */
window.Hyphenopoly = {};

((e,t,s,n)=>{"use strict";const r=e=>new Map(e),l="Hyphenopoly_Loader.js",o=t.currentScript.src,a=sessionStorage;let c=!1;s.config=i=>{const h=(e,t)=>e?(n.entries(t).forEach((([t,s])=>{e[t]=e[t]||s})),e):t;s.cft=Boolean(i.cacheFeatureTests),s.cft&&a.getItem(l)?(s.cf=JSON.parse(a.getItem(l)),s.cf.langs=r(s.cf.langs)):s.cf={langs:r(),pf:!1};const d=o.slice(0,o.lastIndexOf("/")+1),p=d+"patterns/";s.paths=h(i.paths,{maindir:d,patterndir:p}),s.s=h(i.setup,{CORScredentials:"include",hide:"all",selectors:{".hyphenate":{}},timeout:1e3}),s.s.hide=["all","element","text"].indexOf(s.s.hide),i.handleEvent&&(s.hev=i.handleEvent);const f=r(n.entries(i.fallbacks||{}));s.lrq=r(),n.entries(i.require).forEach((([e,t])=>{s.lrq.set(e.toLowerCase(),{fn:f.get(e)||e,wo:t})})),(()=>{const o="appendChild",i="createElement",h="createTextNode",d=()=>{let e=null,t=null;const s=new Promise(((s,n)=>{e=s,t=n}));return s.resolve=e,s.reject=t,s};s.ac=new AbortController;const p={credentials:s.s.CORScredentials,signal:s.ac.signal};let f=null;s.hide=(e,r)=>{if(e){let e="{visibility:hidden!important}";f=t[i]("style");let l="";0===r?l="html"+e:-1!==r&&(2===r&&(e="{color:transparent!important}"),n.keys(s.s.selectors).forEach((t=>{l+=t+e}))),f[o](t[h](l)),t.head[o](f)}else f&&f.remove()};const g=(()=>{let e=null;return{ap:()=>e?(t.documentElement[o](e),e):null,cl:()=>{e&&e.remove()},cr:n=>{if(s.cf.langs.has(n))return;e=e||t[i]("body");const r=t[i]("div"),l="hyphens:auto";r.lang=n,r.style.cssText=`visibility:hidden;-webkit-${l};-ms-${l};${l};width:48px;font-size:12px;line-height:12px;border:none;padding:0;word-wrap:normal`,r[o](t[h](s.lrq.get(n).wo.toLowerCase())),e[o](r)}}})();s.res={he:r()};const y=t=>{const n=s.lrq.get(t).fn;s.cf.pf=!0,s.cf.langs.set(t,"H9Y"),s.res.he.has(n)?s.res.he.get(n).l.push(t):s.res.he.set(n,{l:[t],w:e.fetch(s.paths.patterndir+n+".wasm",p)})};s.lrq.forEach(((e,t)=>{"FORCEHYPHENOPOLY"===e.wo||"H9Y"===s.cf.langs.get(t)?y(t):g.cr(t)}));const m=g.ap();m&&(m.querySelectorAll("div").forEach((e=>{var t;"auto"===((t=e.style).hyphens||t.webkitHyphens||t.msHyphens)&&e.offsetHeight>12?s.cf.langs.set(e.lang,"CSS"):y(e.lang)})),g.cl());const u=s.hev;s.cf.pf?(s.res.DOM=new Promise((e=>{"loading"===t.readyState?t.addEventListener("DOMContentLoaded",e,{once:!0,passive:!0}):e()})),s.hide(1,s.s.hide),s.timeOutHandler=e.setTimeout((()=>{s.hide(0,null),1&s.s.timeout&&s.ac.abort()}),s.s.timeout),c?s.main():fetch(s.paths.maindir+"Hyphenopoly.js",p).then((e=>{e.ok&&e.blob().then((e=>{const s=t[i]("script");s.src=URL.createObjectURL(e),t.head[o](s),c=!0,URL.revokeObjectURL(s.src)}))})),s.hy6ors=r(),s.cf.langs.forEach(((e,t)=>{"H9Y"===e&&s.hy6ors.set(t,d())})),s.hy6ors.set("HTML",d()),s.hyphenators=new Proxy(s.hy6ors,{get:(e,t)=>e.get(t),set:()=>!0}),u&&u.polyfill&&u.polyfill()):(u&&u.tearDown&&u.tearDown(),e.Hyphenopoly=null),s.cft&&a.setItem(l,JSON.stringify({langs:[...s.cf.langs.entries()],pf:s.cf.pf}))})()}})(window,document,Hyphenopoly,Object);
